{
  "displayName": "Chronicle-Sniffer Operational Dashboard",
  "gridLayout": {
    "columns": 2,
    "widgets": [
      {
        "title": "Sniffer Heartbeats (Overall)",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "sum(rate(logging_googleapis_com:user_sniffer_heartbeat_count{monitored_resource=\"global\"}[$${__interval}]))"
              },
              "plotType": "LINE",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Heartbeats/min",
            "scale": "LINEAR"
          }
        }
      },
      {
        "title": "PCAP Files Uploaded (Overall)",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "sum(rate(logging_googleapis_com:user_pcap_files_uploaded_count{monitored_resource=\"global\"}[$${__interval}]))"
              },
              "plotType": "LINE",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Uploads/min",
            "scale": "LINEAR"
          }
        }
      },
      {
        "title": "Cloud Run - Processed Requests (Success) - ${cloud_run_processor_service_name}",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "sum(rate(run_googleapis_com_request_count{service_name=\"${cloud_run_processor_service_name}\", response_code_class=\"2xx\"}[$${__interval}]))"
              },
              "plotType": "STACKED_BAR",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Requests/sec",
            "scale": "LINEAR"
          }
        }
      },
      {
        "title": "Pub/Sub - Unacked Msgs (Sub: ${pubsub_processor_subscription_id})",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "max(pubsub_googleapis_com_subscription_num_unacked_messages_by_region{subscription_id=\"${pubsub_processor_subscription_id}\"})"
              },
              "plotType": "LINE",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Count",
            "scale": "LINEAR"
          }
        }
      },
      {
        "title": "UDM Events Generated (Overall Rate)",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "sum(rate(logging_googleapis_com:user_udm_events_generated_count{monitored_resource=\"global\"}[$${__interval}]))"
              },
              "plotType": "LINE",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Events/sec",
            "scale": "LINEAR"
          }
        }
      },
      {
        "title": "PCAP Upload Errors (Overall)",
        "xyChart": {
          "dataSets": [
            {
              "timeSeriesQuery": {
                "prometheusQuery": "sum(increase(logging_googleapis_com:user_pcap_upload_errors_count{monitored_resource=\"global\"}[$${__interval}]))"
              },
              "plotType": "LINE",
              "targetAxis": "Y1"
            }
          ],
          "timeshiftDuration": "0s",
          "yAxis": {
            "label": "Error Count (sum over 5m window)",
            "scale": "LINEAR"
          }
        }
      }
    ]
  }
}